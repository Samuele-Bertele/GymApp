(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{445:function(e,t,s){Promise.resolve().then(s.bind(s,3946))},3946:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return G}});var l=s(7437),a=s(2265),r=s(62);let i=(0,r.Z)("dumbbell",[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]]),n=(0,r.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),o=(0,r.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),c=(0,r.Z)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),d=(0,r.Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),x=(0,r.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),m=(0,r.Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),u=(0,r.Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),h=(0,r.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),b=(0,r.Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),p=(0,r.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),g=(0,r.Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),f=(0,r.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),v=(0,r.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var j=s(9206);let N=(0,r.Z)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),y=(0,r.Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),w="fitsheet_exercises_cache",k="fitsheet_exercises_cache_timestamp",C=[{id:"1",email:"admin@fitsheet.app",password:"admin123",name:"Admin",role:"admin"},{id:"2",email:"coach@fitsheet.app",password:"coach123",name:"Emanuele Rizzo",role:"coach"},{id:"3",email:"client@fitsheet.app",password:"client123",name:"Samuele Bertel\xe8",role:"client"}],z=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),S=()=>Date.now().toString(),D=()=>Math.random().toString(36).substring(2,15),I=(e,t)=>{let[s,l]=(0,a.useState)(()=>{try{let s=localStorage.getItem(e);return s?JSON.parse(s):t}catch(e){return t}});return[s,t=>{try{let a=t instanceof Function?t(s):t;l(a),localStorage.setItem(e,JSON.stringify(a))}catch(t){console.error("Errore nel salvataggio in localStorage (".concat(e,"):"),t)}}]},M=()=>(0,l.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-white text-xl",children:"Caricamento..."})}),E=e=>{let{onLogin:t}=e,[s,r]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[x,m]=(0,a.useState)(!1),u=async e=>{e.preventDefault(),d(""),m(!0);try{await t(s,n)||d("Email o password non validi")}finally{m(!1)}};return(0,l.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"w-full max-w-md",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-blue-500 rounded-3xl mb-4 shadow-2xl",children:(0,l.jsx)(i,{size:40,className:"text-white"})}),(0,l.jsx)("h1",{className:"text-5xl font-black text-white mb-2",children:"FitSheet"}),(0,l.jsx)("p",{className:"text-slate-400",children:"Sistema di gestione schede allenamento"})]}),(0,l.jsx)("form",{onSubmit:u,className:"space-y-6",children:(0,l.jsxs)("div",{className:"bg-slate-900 rounded-3xl p-8 shadow-2xl border border-slate-800",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),(0,l.jsx)("input",{type:"email",value:s,onChange:e=>r(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",placeholder:"Email",required:!0,disabled:x})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),(0,l.jsx)("input",{type:"password",value:n,onChange:e=>o(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",placeholder:"Password",required:!0,disabled:x})]}),c&&(0,l.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 text-red-300 px-4 py-3 rounded-xl text-sm",children:c}),(0,l.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Accesso in corso...":"Accedi"})]}),(0,l.jsxs)("div",{className:"mt-6 p-4 bg-slate-800 rounded-xl",children:[(0,l.jsx)("p",{className:"text-xs text-slate-400 mb-2 font-semibold",children:"Account demo:"}),(0,l.jsxs)("div",{className:"space-y-1 text-xs text-slate-400",children:[(0,l.jsx)("div",{children:"\uD83D\uDC68‍\uD83D\uDCBC Admin: admin@fitsheet.app / admin123"}),(0,l.jsx)("div",{children:"\uD83C\uDFCB️ Coach: coach@fitsheet.app / coach123"}),(0,l.jsx)("div",{children:"\uD83D\uDC64 Client: client@fitsheet.app / client123"})]})]})]})})]})})},A=e=>{let{exercise:t,index:s,onRemove:a,variant:r="builder",onToggleSet:x,completedSets:m={},onStartTimer:u}=e,h=Array.from({length:t.sets},(e,t)=>t+1);return(0,l.jsxs)("div",{className:"bg-slate-900 rounded-2xl p-4 border border-slate-700 hover:border-slate-600 transition-all",children:[(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("span",{className:"bg-gradient-to-br from-blue-600 to-blue-500 w-10 h-10 rounded-xl flex items-center justify-center font-bold text-white flex-shrink-0",children:s+1}),(0,l.jsx)("div",{className:"w-20 h-20 bg-slate-800 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center",children:t.gifUrl?(0,l.jsx)("img",{src:"/api/image?url=".concat(encodeURIComponent(t.gifUrl)),alt:t.name,className:"w-full h-full object-cover"}):(0,l.jsx)(i,{size:24,className:"text-slate-600"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h4",{className:"font-bold text-lg text-white mb-2",children:t.name}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs mb-3",children:[(0,l.jsxs)("span",{className:"bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full",children:[t.sets," serie"]}),(0,l.jsxs)("span",{className:"bg-slate-700 text-slate-300 px-3 py-1 rounded-full",children:[t.reps," reps"]}),(0,l.jsxs)("span",{className:"bg-slate-700 text-slate-300 px-3 py-1 rounded-full",children:[t.rest,"'' rec"]})]}),t.notes&&"builder"===r&&(0,l.jsxs)("p",{className:"text-sm text-slate-400",children:["\uD83D\uDCA1 ",t.notes]})]}),"builder"===r&&a&&(0,l.jsx)("button",{onClick:a,className:"p-2 hover:bg-red-500/20 rounded-xl transition-all self-start",children:(0,l.jsx)(n,{size:18,className:"text-red-400"})})]}),"client"===r&&(0,l.jsxs)(l.Fragment,{children:[t.notes&&(0,l.jsx)("div",{className:"my-3 p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:(0,l.jsxs)("p",{className:"text-sm text-blue-200",children:["\uD83D\uDCA1 ",t.notes]})}),(0,l.jsx)("div",{className:"space-y-2 mt-3",children:h.map(e=>{let s=m["".concat(t.id,"-").concat(e)];return(0,l.jsxs)("button",{onClick:()=>null==x?void 0:x(e),className:"w-full p-3 rounded-xl flex items-center justify-between transition-all ".concat(s?"bg-gradient-to-r from-blue-600 to-blue-500 border-2 border-blue-400":"bg-slate-800 border-2 border-slate-700 hover:bg-slate-700"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[s?(0,l.jsx)(o,{size:24,className:"text-white"}):(0,l.jsx)(c,{size:24,className:"text-slate-400"}),(0,l.jsxs)("span",{className:"font-bold text-white",children:["Serie ",e]})]}),s&&(0,l.jsx)("span",{className:"text-sm text-blue-100 font-semibold",children:"✓ Completata"})]},e)})}),(0,l.jsxs)("button",{onClick:()=>null==u?void 0:u(t.rest),className:"w-full mt-3 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 p-3 rounded-xl font-bold text-white flex items-center justify-center gap-2 transition-all shadow-lg",children:[(0,l.jsx)(d,{size:18}),"Avvia Timer ",t.rest,"''"]})]})]})},q=e=>{let{user:t,sheets:s,users:r,onSaveSheets:o,onSaveUsers:c,onLogout:d,view:f,setView:v}=e,[j,N]=(0,a.useState)(null),[y,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(""),z=(0,a.useMemo)(()=>r.filter(e=>"client"===e.role),[r]),I=(0,a.useMemo)(()=>s.filter(e=>e.coachId===t.id),[s,t.id]),M=(0,a.useCallback)(()=>{let e=r.find(e=>e.id===k);N({id:S(),coachId:t.id,clientId:k,clientName:(null==e?void 0:e.name)||"",objective:"Ipertrofia",duration:"4 settimane",days:[{number:1,name:"Giorno 1",warmup:[],exercises:[]}],createdAt:new Date().toISOString(),token:D()}),w(!0)},[k,t.id,r]),E=(0,a.useCallback)(async e=>{o(j&&s.find(e=>e.id===j.id)?s.map(t=>t.id===e.id?e:t):[...s,e]),w(!1),N(null),C("")},[j,s,o]),A=(0,a.useCallback)(async e=>{confirm("Sei sicuro di voler eliminare questa scheda?")&&o(s.filter(t=>t.id!==e))},[s,o]),q=(0,a.useCallback)(async e=>{let t=r.find(t=>t.id===e);if((null==t?void 0:t.email)==="admin@fitsheet.app"){alert("Non puoi eliminare l'utente admin principale del sistema.");return}let l=s.filter(t=>t.coachId===e||t.clientId===e),a="Sei sicuro di voler eliminare l'utente \"".concat(null==t?void 0:t.name,'"?');if(l.length>0&&(a+="\n\n⚠️ ATTENZIONE: Questo utente ha ".concat(l.length," scheda/e associata/e. Le schede verranno eliminate permanentemente.")),confirm(a)){let t=r.filter(t=>t.id!==e),l=s.filter(t=>t.coachId!==e&&t.clientId!==e);c(t),o(l)}},[r,s,c,o]);return(0,l.jsxs)("div",{className:"min-h-screen bg-black",children:[(0,l.jsx)("header",{className:"bg-slate-900 border-b border-slate-800 sticky top-0 z-40",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-500 rounded-2xl flex items-center justify-center",children:(0,l.jsx)(i,{size:24,className:"text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-black text-white",children:"FitSheet"}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"admin"===t.role?"Amministrazione":"Dashboard Coach"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"hidden md:flex items-center gap-2 bg-slate-800 rounded-xl px-4 py-2",children:[(0,l.jsx)(x,{size:18,className:"text-slate-400"}),(0,l.jsx)("span",{className:"text-white font-medium",children:t.name}),(0,l.jsx)("span",{className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full",children:t.role})]}),(0,l.jsx)("button",{onClick:d,className:"bg-slate-800 hover:bg-slate-700 text-slate-300 p-3 rounded-xl transition-all",children:(0,l.jsx)(m,{size:20})})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,l.jsxs)("button",{onClick:()=>v("dashboard"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("dashboard"===f?"bg-white text-black":"bg-slate-800 text-white hover:bg-slate-700"),children:[(0,l.jsx)(u,{size:16,className:"inline mr-2"}),"Dashboard"]}),"client"!==t.role&&(0,l.jsxs)(l.Fragment,{children:["admin"===t.role&&(0,l.jsxs)("button",{onClick:()=>v("users"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("users"===f?"bg-white text-black":"bg-slate-800 text-white hover:bg-slate-700"),children:[(0,l.jsx)(h,{size:16,className:"inline mr-2"}),"Utenti"]}),(0,l.jsxs)("button",{onClick:()=>v("create-user"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("create-user"===f?"bg-white text-black":"bg-slate-800 text-white hover:bg-slate-700"),children:[(0,l.jsx)(b,{size:16,className:"inline mr-2"}),"Crea Utente"]})]})]})]})}),(0,l.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-8",children:["dashboard"===f&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Le Mie Schede"}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"bg-slate-900 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Seleziona un cliente"}),z.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,l.jsxs)("button",{onClick:M,disabled:!k,className:"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg flex items-center gap-2",children:[(0,l.jsx)(p,{size:20}),"Nuova Scheda"]})]})]}),0===I.length?(0,l.jsxs)("div",{className:"bg-slate-900 rounded-3xl border border-slate-800 p-12 text-center",children:[(0,l.jsx)(g,{size:64,className:"mx-auto mb-4 text-slate-600"}),(0,l.jsx)("p",{className:"text-xl text-white mb-2",children:"Nessuna scheda creata"}),(0,l.jsx)("p",{className:"text-slate-400",children:"Inizia creando la tua prima scheda allenamento"})]}):(0,l.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(e=>(0,l.jsxs)("div",{className:"bg-slate-900 rounded-3xl border border-slate-800 p-6 hover:bg-slate-800 transition-all",children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-white mb-1",children:e.clientName||"Senza nome"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full",children:e.objective}),(0,l.jsx)("span",{className:"text-xs bg-slate-700 text-slate-300 px-2 py-1 rounded-full",children:e.duration})]})]})}),(0,l.jsxs)("div",{className:"text-sm text-slate-400 mb-4",children:[e.days.reduce((e,t)=>{var s;return e+((null===(s=t.exercises)||void 0===s?void 0:s.length)||0)},0)," ","esercizi totali"]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>{N(e),w(!0)},className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white py-2 rounded-xl transition-all",children:"Modifica"}),(0,l.jsx)("button",{onClick:()=>A(e.id),className:"bg-red-500/20 hover:bg-red-500/30 text-red-400 p-2 rounded-xl transition-all",children:(0,l.jsx)(n,{size:18})})]})]},e.id))})]}),"users"===f&&"admin"===t.role&&(0,l.jsx)(Z,{users:r,sheets:s,onDeleteUser:q,onSaveUsers:c,onSaveSheets:o}),"create-user"===f&&(0,l.jsx)(R,{users:r,onSaveUsers:c,currentUserRole:t.role})]}),y&&(0,l.jsx)(L,{sheet:j,onSave:E,onClose:()=>{w(!1),N(null),C("")}})]})},L=e=>{let{sheet:t,onSave:s,onClose:r}=e,[o,c]=(0,a.useState)(()=>t||{id:S(),coachId:"",clientId:"",clientName:"",objective:"Ipertrofia",duration:"4 settimane",days:[{number:1,name:"Giorno 1",warmup:[],exercises:[]}],createdAt:new Date().toISOString(),token:D()}),[d,x]=(0,a.useState)(1),[m,u]=(0,a.useState)(""),[h,b]=(0,a.useState)([]),[g,N]=(0,a.useState)(!1),[y,C]=(0,a.useState)(!1),[z,I]=(0,a.useState)(null),[M,E]=(0,a.useState)(!1),A=(0,a.useRef)(null),q=async e=>{if(!e.trim()){b([]);return}N(!0);let t=function(e){let t=function(){try{let e=localStorage.getItem(w),t=localStorage.getItem(k);if(!e||!t)return[];let s=Date.now()-parseInt(t,10);if(s>6048e5)return console.log("[Cache] Cache scaduta, ignorata"),[];let l=JSON.parse(e);return console.log("[Cache] Caricati ".concat(l.length," esercizi dalla cache (et\xe0: ").concat(Math.round(s/1e3/60)," minuti)")),l}catch(e){return console.error("[Cache] Errore nel caricamento:",e),[]}}();if(!e.trim()||0===t.length)return[];let s=e.toLowerCase(),l=t.filter(e=>{let t=(e.name||"").toLowerCase(),l=(e.target||"").toLowerCase(),a=(e.bodyPart||"").toLowerCase(),r=(e.equipment||"").toLowerCase(),i=(e.description||"").toLowerCase();return t.includes(s)||l.includes(s)||a.includes(s)||r.includes(s)||i.includes(s)});return console.log("[Cache] Trovati ".concat(l.length,' risultati nella cache per "').concat(e,'"')),l.slice(0,50)}(e);b(t);try{if("undefined"!=typeof navigator&&navigator.onLine)try{let t=await fetch("/api/exercises?q=".concat(encodeURIComponent(e)));if(t.ok){let e=((await t.json()).results||[]).map(e=>({id:e.id||Math.random().toString(),name:e.name||"",description:e.description||e.instructions||"",bodyPart:e.bodyPart||"",target:e.target||"",equipment:e.equipment||"",image:e.image||null,images:e.images||[],raw:e.raw||e}));e.length>0&&function(e){try{let t=e.map(e=>({id:e.id||Math.random().toString(),name:e.name||"",description:e.description||"",bodyPart:e.bodyPart||"",target:e.target||"",equipment:e.equipment||"",image:e.image||null,images:e.images||[],raw:e.raw||e}));localStorage.setItem(w,JSON.stringify(t)),localStorage.setItem(k,Date.now().toString()),console.log("[Cache] Salvati ".concat(t.length," esercizi nella cache"))}catch(e){console.error("[Cache] Errore nel salvataggio:",e)}}(e),b(e)}else console.warn("API fallita, usando cache")}catch(e){console.error("Errore fetch:",e)}else console.log("[Search] Modalit\xe0 offline - usando cache locale"),0===t.length&&b([])}catch(e){console.error("Ricerca fallita completamente:",e),0===t.length&&b([])}finally{N(!1)}},L=e=>{u(e),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>q(e),350)},U=e=>{let t=o.days.map(t=>t.number===d?{...t,exercises:(t.exercises||[]).filter(t=>t.id!==e)}:t);c({...o,days:t})},R=(0,a.useCallback)(e=>{let t=o.days.map(t=>t.number===d?{...t,exercises:[...t.exercises||[],e]}:t);c({...o,days:t}),E(!1)},[o,d]),Z=(0,a.useCallback)((e,t)=>{try{let s="workoutDay_".concat(o.id,"_").concat(e);localStorage.setItem(s,JSON.stringify(t))}catch(e){console.error("Errore nel salvataggio locale:",e)}},[o.id]),G=(0,a.useCallback)(e=>{try{let t="workoutDay_".concat(o.id,"_").concat(e),s=localStorage.getItem(t);return s?JSON.parse(s):[]}catch(e){return console.error("Errore nel caricamento locale:",e),[]}},[o.id]);(0,a.useCallback)(e=>{var t,s;let l={id:Date.now().toString(),apiId:null==z?void 0:z.id,name:(null==z?void 0:z.name)||e.name||"Nuovo esercizio",gifUrl:e.imageData||(null==z?void 0:z.image)||(null==z?void 0:null===(t=z.images)||void 0===t?void 0:t[0])||null,bodyPart:(null==z?void 0:z.bodyPart)||e.bodyPart||"",target:(null==z?void 0:z.target)||e.target||"",equipment:(null==z?void 0:z.equipment)||e.equipment||"",sets:e.sets||3,reps:e.reps||"8-10",rest:e.rest||90,notes:e.notes||"",technique:e.technique||""},a=o.days.map(e=>e.number===d?{...e,exercises:[...e.exercises||[],l]}:e);c({...o,days:a});let r=(null===(s=a.find(e=>e.number===d))||void 0===s?void 0:s.exercises)||[];Z(d,r),C(!1),I(null),u(""),b([])},[z,d,o,Z]),(0,a.useEffect)(()=>{if(t){let e=t.days.map(e=>({...e,exercises:G(e.number)}));c(t=>({...t,days:e}))}},[t,G]);let H=(0,a.useCallback)(()=>{let e=o.days.length+1,t=[...o.days,{number:e,name:"Giorno ".concat(e),warmup:[],exercises:[]}];c(e=>({...e,days:t})),x(e)},[o]),F=(0,a.useCallback)(e=>{if(o.days.length<=1){alert("La scheda deve avere almeno un giorno!");return}if(confirm("Sei sicuro di voler eliminare il Giorno ".concat(e,"?\nTutti gli esercizi in questo giorno verranno eliminati."))){let t=o.days.filter(t=>t.number!==e).map((e,t)=>({...e,number:t+1,name:"Giorno ".concat(t+1)}));c({...o,days:t}),d===e&&x(1)}},[o,d]),O=(0,a.useCallback)((e,t)=>{let s=o.days.map(s=>s.number===e?{...s,name:t}:s);c({...o,days:s})},[o]),_=o.days.find(e=>e.number===d)||{number:d,name:"Giorno ".concat(d),warmup:[],exercises:[]};return(0,l.jsxs)("div",{className:"fixed inset-0 bg-black/90 z-50 overflow-y-auto",children:[(0,l.jsx)("div",{className:"min-h-screen p-6",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,l.jsxs)("div",{className:"bg-slate-900 rounded-3xl border border-slate-800 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-slate-800",children:[(0,l.jsxs)("button",{onClick:r,className:"p-2 hover:bg-slate-800 rounded-xl transition-all text-white flex items-center gap-2",children:[(0,l.jsx)(f,{size:24}),"Chiudi"]}),(0,l.jsxs)("button",{onClick:()=>{s(o)},className:"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg flex items-center gap-2",children:[(0,l.jsx)(v,{size:20}),"Salva Scheda"]})]}),(0,l.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6 p-6",children:[(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsxs)("div",{className:"bg-slate-800 rounded-2xl border border-slate-700 p-6 sticky top-6",children:[(0,l.jsxs)("h3",{className:"font-bold text-lg mb-4 text-white flex items-center gap-2",children:[(0,l.jsx)(j.Z,{size:20,className:"text-blue-400"}),"Cerca Esercizi (API Wger)"]}),(0,l.jsxs)("div",{className:"relative mb-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"bench press, squat...",value:m,onChange:e=>L(e.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-xl pl-10 pr-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)(j.Z,{size:18,className:"absolute left-3 top-3.5 text-slate-500"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("button",{onClick:()=>E(!0),className:"w-full bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white font-bold py-3 px-4 rounded-xl transition-all shadow-lg flex items-center justify-center gap-2 text-sm",children:[(0,l.jsx)(p,{size:18}),"Crea Esercizio Personalizzato"]}),(0,l.jsx)("p",{className:"text-xs text-slate-500 mt-2 text-center",children:"Non trovi l'esercizio? Creane uno personalizzato!"})]}),g&&(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto"}),(0,l.jsx)("p",{className:"text-slate-400 mt-2 text-sm",children:"Ricerca in corso..."})]}),(0,l.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:h.map(e=>(0,l.jsx)("div",{className:"bg-slate-900 rounded-xl p-3 hover:bg-slate-700 cursor-pointer transition-all border border-slate-700 hover:border-blue-500",onClick:()=>{I(e),C(!0)},children:(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-slate-800 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center",children:e.image?(0,l.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):(0,l.jsx)(i,{size:24,className:"text-slate-600"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h4",{className:"font-semibold text-sm text-white truncate",children:e.name}),(0,l.jsxs)("p",{className:"text-xs text-slate-400 mt-1 line-clamp-2",children:[(e.description||"").replace(/<[^>]*>/g,"").substring(0,50),"..."]})]}),(0,l.jsx)(p,{size:18,className:"text-blue-400 flex-shrink-0 mt-2"})]})},e.id))}),m&&0===h.length&&!g&&(0,l.jsx)("div",{className:"text-center text-slate-400 py-8",children:(0,l.jsxs)("p",{children:['Nessun risultato trovato per "',m,'"']})}),!m&&(0,l.jsxs)("div",{className:"text-center text-slate-500 py-8",children:[(0,l.jsx)(j.Z,{size:40,className:"mx-auto mb-2 opacity-30"}),(0,l.jsx)("p",{className:"text-sm",children:"Cerca esercizi dal database Wger"}),(0,l.jsx)("p",{className:"text-xs mt-1",children:"API gratuita • 800+ esercizi"})]})]})}),(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsxs)("div",{className:"bg-slate-800 rounded-2xl border border-slate-700 p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-bold text-lg text-white mb-2",children:_.name||"Giorno ".concat(d)}),(0,l.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:o.days.map(e=>(0,l.jsx)("button",{onClick:()=>x(e.number),className:"px-4 py-2 rounded-xl font-semibold transition-all whitespace-nowrap flex-shrink-0 ".concat(d===e.number?"bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow-lg":"bg-slate-700 text-white hover:bg-slate-600"),children:e.name||"Giorno ".concat(e.number)},e.number))})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:[(0,l.jsxs)("button",{onClick:H,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white rounded-xl font-semibold transition-all flex items-center gap-2 whitespace-nowrap",title:"Aggiungi nuovo giorno",children:[(0,l.jsx)(p,{size:18}),"Aggiungi Giorno"]}),o.days.length>1&&(0,l.jsxs)("button",{onClick:()=>F(d),className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-500 hover:from-red-700 hover:to-red-600 text-white rounded-xl font-semibold transition-all flex items-center gap-2 whitespace-nowrap",title:"Rimuovi giorno corrente",children:[(0,l.jsx)(n,{size:18}),"Rimuovi Giorno"]})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-300",children:"Nome personalizzato:"}),(0,l.jsx)("input",{type:"text",value:_.name||"Giorno ".concat(d),onChange:e=>O(d,e.target.value),className:"flex-1 bg-slate-800 border border-slate-700 rounded-xl px-4 py-2 text-white text-sm",placeholder:"Es: Push, Pull, Legs, Upper Body..."}),(0,l.jsx)("button",{onClick:()=>O(d,"Giorno ".concat(d)),className:"px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-xl text-sm transition-all",title:"Ripristina nome predefinito",children:"Reset"})]}),(0,l.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Personalizza il nome del giorno per una migliore organizzazione"})]}),(0,l.jsx)("div",{className:"space-y-3",children:0===_.exercises.length?(0,l.jsxs)("div",{className:"text-center py-12 bg-slate-900 rounded-2xl border-2 border-dashed border-slate-700",children:[(0,l.jsx)(p,{size:48,className:"mx-auto mb-3 text-slate-600"}),(0,l.jsx)("p",{className:"text-slate-400",children:"Nessun esercizio"}),(0,l.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Cerca e aggiungi dalla barra laterale"})]}):_.exercises.map((e,t)=>(0,l.jsx)("div",{className:"bg-slate-900 rounded-2xl p-4 border border-slate-700 hover:border-slate-600 transition-all",children:(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("span",{className:"bg-gradient-to-br from-blue-600 to-blue-500 w-10 h-10 rounded-xl flex items-center justify-center font-bold text-white flex-shrink-0",children:t+1}),(0,l.jsx)("div",{className:"w-20 h-20 bg-slate-800 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center",children:e.gifUrl?(0,l.jsx)("img",{src:e.gifUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,l.jsx)(i,{size:28,className:"text-slate-600"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h4",{className:"font-bold text-lg text-white mb-2",children:e.name}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,l.jsxs)("span",{className:"bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full",children:[e.sets," serie"]}),(0,l.jsxs)("span",{className:"bg-slate-700 text-slate-300 px-3 py-1 rounded-full",children:[e.reps," reps"]}),(0,l.jsxs)("span",{className:"bg-slate-700 text-slate-300 px-3 py-1 rounded-full",children:[e.rest,"'' rec"]})]}),e.notes&&(0,l.jsxs)("p",{className:"text-sm text-slate-400 mt-2",children:["\uD83D\uDCA1 ",e.notes]})]}),(0,l.jsx)("button",{onClick:()=>U(e.id),className:"p-2 hover:bg-red-500/20 rounded-xl transition-all self-start",children:(0,l.jsx)(n,{size:18,className:"text-red-400"})})]})},e.id))})]})})]})]})})}),y&&z&&(0,l.jsx)(P,{exercise:z,onConfirm:e=>{var t,s,l,a,r,i,n,x,m;let h={id:Date.now().toString(),apiId:null==z?void 0:z.id,name:(null==z?void 0:z.name)||"Nuovo esercizio",gifUrl:e.imageData||(null==z?void 0:z.image)||(null==z?void 0:null===(t=z.images)||void 0===t?void 0:t[0])||null,bodyPart:(null==z?void 0:null===(s=z.raw)||void 0===s?void 0:s.category)||(null==z?void 0:z.bodyPart),target:(null==z?void 0:null===(a=z.raw)||void 0===a?void 0:null===(l=a.muscles)||void 0===l?void 0:l[0])||(null==z?void 0:z.target),equipment:(null===(i=(x=(null==z?void 0:null===(n=z.raw)||void 0===n?void 0:n.equipment)||[]).map)||void 0===i?void 0:null===(r=(m=i.call(x,e=>(null==e?void 0:e.name)?e.name:e)).join)||void 0===r?void 0:r.call(m,", "))||(null==z?void 0:z.equipment)||"",sets:e.sets||3,reps:e.reps||"8-10",rest:e.rest||90,notes:e.notes||"",technique:e.technique||""},p=o.days.map(e=>e.number===d?{...e,exercises:[...e.exercises||[],h]}:e);c({...o,days:p}),C(!1),I(null),u(""),b([])},onClose:()=>{C(!1),I(null)}}),M&&(0,l.jsx)(T,{onConfirm:R,onClose:()=>E(!1)})]})},P=e=>{let{exercise:t,onConfirm:s,onClose:r}=e,[n,c]=(0,a.useState)({sets:3,reps:"8-10",rest:90,notes:"",technique:""}),[d,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{x(null),c({sets:3,reps:"8-10",rest:90,notes:"",technique:""})},[t]);let m=e=>{if(!e)return;let t=new FileReader;t.onload=()=>{x(t.result)},t.readAsDataURL(e)};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4",children:(0,l.jsx)("div",{className:"bg-slate-900 rounded-3xl border border-slate-800 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,l.jsxs)("div",{className:"flex gap-4 flex-1",children:[(0,l.jsx)("div",{className:"w-85 h-24 bg-slate-800 rounded-2xl overflow-hidden flex items-center justify-center",children:d?(0,l.jsx)("img",{src:d,alt:t.name,className:"w-full h-full object-cover"}):t.image?(0,l.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):(0,l.jsx)(i,{size:40,className:"text-slate-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:t.name}),t.description&&(0,l.jsx)("p",{className:"text-sm text-slate-400 line-clamp-2",children:t.description.replace(/<[^>]*>/g,"")}),(0,l.jsxs)("div",{style:{position:"relative",display:"inline-block",marginTop:"10px",width:"100%",maxWidth:"480px",border:"1px solid #9ca3af",borderRadius:"12px",padding:"12px",background:"#0f1724",boxSizing:"border-box",cursor:"pointer",color:"#cbd5e1",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial"},children:[(0,l.jsx)("input",{id:"file",type:"file",accept:"image/*","aria-label":"Carica immagine",onChange:e=>{var t;return m(null===(t=e.target.files)||void 0===t?void 0:t[0])},style:{position:"absolute",inset:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",border:0,margin:0,padding:0}}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"file",style:{display:"block",fontSize:"0.9rem",color:"#e2e8f0",marginBottom:"6px",fontWeight:"600"},children:"Carica immagine"}),(0,l.jsx)("p",{style:{fontSize:"0.75rem",color:"#94a3b8",margin:0},children:"L'immagine verr\xe0 salvata localmente nella scheda (data URL)."})]})]})]})]}),(0,l.jsx)("button",{onClick:r,className:"p-2 hover:bg-slate-800 rounded-xl transition-all",children:(0,l.jsx)(f,{size:20,className:"text-white"})})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Serie"}),(0,l.jsx)("input",{type:"number",value:n.sets,onChange:e=>c({...n,sets:parseInt(e.target.value)||0}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white",min:1})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ripetizioni"}),(0,l.jsx)("input",{type:"text",value:n.reps,onChange:e=>c({...n,reps:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Recupero (sec)"}),(0,l.jsx)("input",{type:"number",value:n.rest,onChange:e=>c({...n,rest:parseInt(e.target.value)||0}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Note personalizzate"}),(0,l.jsx)("textarea",{value:n.notes,onChange:e=>c({...n,notes:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white",rows:3,placeholder:"es: Movimento lento e controllato..."})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,l.jsx)("button",{onClick:r,className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl font-semibold",children:"Annulla"}),(0,l.jsxs)("button",{onClick:()=>s({...n,imageData:d}),className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white px-4 py-3 rounded-xl font-semibold flex items-center justify-center gap-2",children:[(0,l.jsx)(o,{size:18})," Aggiungi"]})]})]})})})},U=e=>{let{user:t,sheets:s,onLogout:r}=e,[i,n]=(0,a.useState)(s[0]||null),[o,c]=(0,a.useState)(1),[u,h]=(0,a.useState)(!1),[b,p]=(0,a.useState)(0),[g,f]=(0,a.useState)(90),[v,j]=(0,a.useState)([]),[w,k]=(0,a.useState)({});(0,a.useEffect)(()=>{i&&c(1)},[i]),(0,a.useEffect)(()=>{let e;return u&&b>0?e=setInterval(()=>{p(e=>e-1)},1e3):0===b&&u&&(h(!1),navigator.vibrate&&navigator.vibrate([200,100,200])),()=>clearInterval(e)},[u,b]);let C=(0,a.useCallback)(e=>{f(e),p(e),h(!0)},[]),S=(0,a.useCallback)((e,t)=>{let s="".concat(e,"-").concat(t);k(e=>({...e,[s]:!e[s]}))},[]);if(!i)return(0,l.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"text-center text-white",children:[(0,l.jsx)("p",{className:"text-xl mb-4",children:"Nessuna scheda assegnata"}),(0,l.jsx)("button",{onClick:r,className:"bg-slate-800 hover:bg-slate-700 px-6 py-3 rounded-xl transition-all",children:"Logout"})]})});let D=i.days.find(e=>e.number===o);return(0,l.jsxs)("div",{className:"min-h-screen bg-black",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 p-6 pb-8 rounded-b-[3rem] shadow-2xl",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(x,{size:16,className:"text-blue-200"}),(0,l.jsx)("p",{className:"text-sm text-blue-100",children:t.name})]}),(0,l.jsx)("h1",{className:"text-3xl font-black text-white",children:"Scheda Allenamento"})]}),(0,l.jsx)("button",{onClick:r,className:"bg-white/20 hover:bg-white/30 p-3 rounded-2xl transition-all",children:(0,l.jsx)(m,{size:20,className:"text-white"})})]}),(0,l.jsxs)("div",{className:"text-sm text-blue-100 mb-4",children:[i.objective," • ",i.duration]}),(0,l.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:i.days.map(e=>(0,l.jsx)("button",{onClick:()=>c(e.number),className:"flex-1 min-w-[120px] py-3 rounded-2xl font-bold transition-all whitespace-nowrap ".concat(o===e.number?"bg-white text-blue-600 shadow-xl":"bg-white/20 text-white hover:bg-white/30"),children:e.name||"Giorno ".concat(e.number)},e.number))})]}),(0,l.jsxs)("div",{className:"mx-4 -mt-6 bg-slate-900 rounded-3xl p-6 shadow-2xl border border-slate-800",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Timer Recupero"}),(0,l.jsx)("p",{className:"text-4xl font-black text-white font-mono",children:z(b)})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>h(!u),className:"p-4 rounded-2xl transition-all shadow-lg ".concat(u?"bg-gradient-to-br from-red-600 to-red-500":"bg-gradient-to-br from-blue-600 to-blue-500"),children:u?(0,l.jsx)(N,{size:24,className:"text-white"}):(0,l.jsx)(d,{size:24,className:"text-white"})}),(0,l.jsx)("button",{onClick:()=>{p(g),h(!1)},className:"p-4 bg-slate-800 rounded-2xl hover:bg-slate-700 transition-all shadow-lg",children:(0,l.jsx)(y,{size:24,className:"text-white"})})]})]}),0===b&&(0,l.jsx)("div",{className:"mt-3 text-center text-blue-400 font-bold animate-pulse",children:"✓ Recupero completato!"})]}),(0,l.jsx)("div",{className:"p-6 space-y-4",children:D&&D.exercises.map((e,t)=>(0,l.jsx)("div",{className:"bg-slate-900 rounded-3xl overflow-hidden border border-slate-800 shadow-xl",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,l.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-blue-500 rounded-2xl flex items-center justify-center text-white font-black text-2xl flex-shrink-0",children:t+1}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"text-xl font-black text-white mb-2",children:e.name}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm",children:[(0,l.jsxs)("span",{className:"bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full font-semibold",children:[e.sets," serie"]}),(0,l.jsxs)("span",{className:"bg-slate-700 text-slate-300 px-3 py-1 rounded-full font-semibold",children:[e.reps," reps"]}),(0,l.jsxs)("span",{className:"bg-slate-700 text-slate-300 px-3 py-1 rounded-full font-semibold",children:[e.rest,"''"]})]})]})]}),e.gifUrl&&(0,l.jsxs)("div",{className:"mb-6",children:["// Dopo la barra di ricerca, aggiungi:",(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("p",{className:"text-xs text-slate-500",children:v.length>0?(0,l.jsxs)("span",{className:"text-green-400",children:["✓ ",v.length," risultati",!navigator.onLine&&" (offline)"]}):(0,l.jsx)("span",{className:"text-slate-500",children:navigator.onLine?"Cerca esercizi...":"\uD83D\uDCF4 Modalit\xe0 offline - usando cache locale"})}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(navigator.onLine?"bg-green-500":"bg-red-500")}),(0,l.jsx)("span",{className:"text-xs text-slate-500",children:navigator.onLine?"Online":"Offline"})]})]}),(0,l.jsxs)("div",{className:"relative bg-slate-800/50 rounded-2xl border-2 border-slate-700/50 overflow-hidden group",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"}),(0,l.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,l.jsx)("img",{src:"/api/image?url=".concat(encodeURIComponent(e.gifUrl)),alt:e.name,className:"max-h-[280px] w-auto max-w-full object-contain rounded-xl shadow-lg transform group-hover:scale-[1.02] transition-transform duration-300",loading:"lazy",onError:e=>{let t=e.target;t.style.display="none";let s=t.parentElement;if(s){let e=document.createElement("div");e.className="flex flex-col items-center justify-center p-8 text-center",e.innerHTML='\n                                <div class="w-20 h-20 bg-slate-700 rounded-2xl flex items-center justify-center mb-3">\n                                  <svg class="w-10 h-10 text-slate-500" fill="currentColor" viewBox="0 0 20 20">\n                                    <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/>\n                                  </svg>\n                                </div>\n                                <p class="text-sm text-slate-500">Immagine non disponibile</p>\n                              ',s.appendChild(e)}}})}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-20 pointer-events-none",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[(0,l.jsxs)("svg",{className:"animate-spin h-4 w-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,l.jsx)("span",{children:"Caricamento..."})]})})]}),(0,l.jsx)("div",{className:"flex justify-center gap-2 mt-2",children:(0,l.jsx)("button",{onClick:e=>{var t,s;e.preventDefault();let l=null===(s=e.currentTarget.parentElement)||void 0===s?void 0:null===(t=s.previousElementSibling)||void 0===t?void 0:t.querySelector("img");l&&(l.classList.toggle("max-h-[180px]"),l.classList.toggle("max-h-[280px]"))},className:"text-xs text-slate-500 hover:text-slate-300 transition-colors px-2 py-1 rounded",title:"Cambia dimensione",children:"↕️ Adatta dimensione"})})]}),e.notes&&(0,l.jsx)("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-2xl",children:(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("span",{className:"text-blue-400 mt-0.5",children:"\uD83D\uDCA1"}),(0,l.jsx)("p",{className:"text-sm text-blue-200 flex-1",children:e.notes})]})}),(0,l.jsx)(A,{exercise:e,index:t,variant:"client",onToggleSet:t=>S(e.id,t),completedSets:w,onStartTimer:()=>C(e.rest)})]})},e.id))})]})},R=e=>{let{users:t,onSaveUsers:s,currentUserRole:r}=e,[i,n]=(0,a.useState)({email:"",password:"",name:"",role:"client"}),[o,c]=(0,a.useState)(""),d=async()=>{if(!i.email||!i.password||!i.name){c("Tutti i campi sono obbligatori");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)){c("Inserisci un indirizzo email valido");return}if(i.password.length<6){c("La password deve essere di almeno 6 caratteri");return}if(t.some(e=>e.email===i.email)){c("Un utente con questa email esiste gi\xe0");return}s([...t,{id:S(),email:i.email,password:i.password,name:i.name,role:i.role}]),c("✅ Utente ".concat(i.name," creato con successo!")),n({email:"",password:"",name:"",role:"client"}),setTimeout(()=>c(""),3e3)};return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:"Crea Nuovo Utente"}),(0,l.jsx)("div",{className:"bg-slate-900 rounded-3xl border border-slate-800 p-8 max-w-2xl w-full",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nome e Cognome"}),(0,l.jsx)("input",{type:"text",value:i.name,onChange:e=>n({...i,name:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Mario Rossi"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),(0,l.jsx)("input",{type:"email",value:i.email,onChange:e=>n({...i,email:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"mario.rossi@email.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),(0,l.jsx)("input",{type:"password",value:i.password,onChange:e=>n({...i,password:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"•••••••• (min. 6 caratteri)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ruolo"}),(0,l.jsx)("select",{value:i.role,onChange:e=>n({...i,role:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:("admin"===r?["client","coach"]:["client"]).map(e=>(0,l.jsx)("option",{value:e,children:"client"===e?"\uD83D\uDC64 Cliente":"\uD83C\uDFCB️ Coach"},e))})]}),o&&(0,l.jsx)("div",{className:"p-4 rounded-xl text-sm ".concat(o.includes("✅")?"bg-blue-500/10 border border-blue-500/20 text-blue-300":"bg-red-500/10 border border-red-500/20 text-red-300"),children:o}),(0,l.jsxs)("button",{onClick:d,className:"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,l.jsx)(b,{size:20}),"Crea Utente"]})]})})]})},Z=e=>{let{users:t,sheets:s,onDeleteUser:r,onSaveUsers:i,onSaveSheets:o}=e,c=(0,a.useCallback)(async e=>{let l=t.find(t=>t.id===e);if((null==l?void 0:l.email)==="admin@fitsheet.app"){alert("Non puoi eliminare l'utente admin principale del sistema.");return}let a=s.filter(t=>t.coachId===e||t.clientId===e),r="Sei sicuro di voler eliminare l'utente \"".concat(null==l?void 0:l.name,'"?');if(a.length>0&&(r+="\n\n⚠️ ATTENZIONE: Questo utente ha ".concat(a.length," scheda/e associata/e. Le schede verranno eliminate permanentemente.")),confirm(r)){let l=t.filter(t=>t.id!==e),a=s.filter(t=>t.coachId!==e&&t.clientId!==e);i(l),o(a)}},[t,s,i,o]);return(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Gestione Utenti"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,l.jsxs)("div",{className:"bg-slate-900 rounded-2xl border border-slate-800 p-4",children:[(0,l.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Totale Utenti"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white",children:t.length})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-2xl border border-slate-800 p-4",children:[(0,l.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Clienti"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:t.filter(e=>"client"===e.role).length})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-2xl border border-slate-800 p-4",children:[(0,l.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Coach"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-green-400",children:t.filter(e=>"coach"===e.role).length})]})]}),(0,l.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,l.jsxs)("div",{className:"bg-slate-900 rounded-3xl border border-slate-800 p-6 hover:bg-slate-800 transition-all group",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-white mb-1",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:e.email})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,l.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("admin"===e.role?"bg-purple-500/20 text-purple-300":"coach"===e.role?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"),children:"admin"===e.role?"\uD83D\uDC51 Admin":"coach"===e.role?"\uD83C\uDFCB️ Coach":"\uD83D\uDC64 Cliente"}),"admin@fitsheet.app"!==e.email&&(0,l.jsx)("button",{onClick:()=>c(e.id),className:"p-2 hover:bg-red-500/20 rounded-xl transition-all opacity-0 group-hover:opacity-100",title:"Elimina utente",children:(0,l.jsx)(n,{size:16,className:"text-red-400"})})]})]}),(0,l.jsxs)("div",{className:"text-xs text-slate-500 mt-4 pt-4 border-t border-slate-800",children:["ID: ",e.id.substring(0,8),"..."]})]},e.id))}),0===t.length&&(0,l.jsxs)("div",{className:"text-center py-12 bg-slate-900 rounded-3xl border border-slate-800",children:[(0,l.jsx)(h,{size:64,className:"mx-auto mb-4 text-slate-600"}),(0,l.jsx)("p",{className:"text-xl text-white mb-2",children:"Nessun utente registrato"}),(0,l.jsx)("p",{className:"text-slate-400",children:'Crea il primo utente dalla sezione "Crea Utente"'})]}),(0,l.jsx)("div",{className:"mt-6 p-4 bg-slate-800/50 rounded-2xl border border-slate-700",children:(0,l.jsxs)("p",{className:"text-sm text-slate-400",children:["\uD83D\uDCA1 ",(0,l.jsx)("strong",{children:"Nota:"})," L'utente admin principale (admin@fitsheet.app) non pu\xf2 essere eliminato per garantire l'accesso al sistema."]})})]})},T=e=>{let{onConfirm:t,onClose:s}=e,[r,n]=(0,a.useState)({name:"",bodyPart:"",target:"",equipment:"",sets:3,reps:"8-10",rest:90,notes:"",technique:""}),[o,c]=(0,a.useState)(null);return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4",children:(0,l.jsx)("div",{className:"bg-slate-900 rounded-3xl border border-slate-800 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Crea Esercizio Personalizzato"}),(0,l.jsx)("button",{onClick:s,className:"p-2 hover:bg-slate-800 rounded-xl transition-all",children:(0,l.jsx)(f,{size:20,className:"text-white"})})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-4",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Informazioni Base"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nome Esercizio *"}),(0,l.jsx)("input",{type:"text",value:r.name,onChange:e=>n({...r,name:e.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",placeholder:"Es: Piegamenti a terra",required:!0})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Parte del Corpo"}),(0,l.jsx)("input",{type:"text",value:r.bodyPart,onChange:e=>n({...r,bodyPart:e.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",placeholder:"Es: Pettorali"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Muscolo Target"}),(0,l.jsx)("input",{type:"text",value:r.target,onChange:e=>n({...r,target:e.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",placeholder:"Es: Gran pettorale"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Attrezzatura"}),(0,l.jsx)("input",{type:"text",value:r.equipment,onChange:e=>n({...r,equipment:e.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",placeholder:"Es: Manubri"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-4",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Immagine (Opzionale)"}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,l.jsx)("div",{className:"md:w-1/3",children:(0,l.jsx)("div",{className:"w-full h-48 bg-slate-900 rounded-2xl overflow-hidden flex items-center justify-center",children:o?(0,l.jsx)("img",{src:o,alt:"Anteprima",className:"w-full h-full object-cover"}):(0,l.jsxs)("div",{className:"text-center p-4",children:[(0,l.jsx)(i,{size:48,className:"text-slate-600 mx-auto mb-3"}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Nessuna immagine caricata"})]})})}),(0,l.jsx)("div",{className:"md:w-2/3",children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Carica un'immagine"}),(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;if(!s.type.startsWith("image/")){alert("Per favore, carica solo file immagine.");return}if(s.size>5242880){alert("L'immagine \xe8 troppo grande. Dimensione massima: 5MB.");return}let l=new FileReader;l.onload=e=>{var t;c(null===(t=e.target)||void 0===t?void 0:t.result)},l.readAsDataURL(s)},className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"})]}),(0,l.jsxs)("div",{className:"text-xs text-slate-400 space-y-1",children:[(0,l.jsx)("p",{children:"• Formati supportati: JPG, PNG, GIF"}),(0,l.jsx)("p",{children:"• Dimensione massima: 5MB"}),(0,l.jsx)("p",{children:"• L'immagine verr\xe0 salvata localmente nella scheda"})]}),o&&(0,l.jsx)("button",{onClick:()=>c(null),className:"text-sm text-red-400 hover:text-red-300",children:"Rimuovi immagine"})]})})]})]}),(0,l.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-4",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Configurazione Allenamento"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Serie"}),(0,l.jsx)("input",{type:"number",value:r.sets,onChange:e=>n({...r,sets:Math.max(1,parseInt(e.target.value)||1)}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",min:1})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ripetizioni"}),(0,l.jsx)("input",{type:"text",value:r.reps,onChange:e=>n({...r,reps:e.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",placeholder:"Es: 8-12"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Recupero (secondi)"}),(0,l.jsx)("input",{type:"number",value:r.rest,onChange:e=>n({...r,rest:Math.max(0,parseInt(e.target.value)||0)}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",min:0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Note e Istruzioni"}),(0,l.jsx)("textarea",{value:r.notes,onChange:e=>n({...r,notes:e.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",rows:3,placeholder:"Es: Esecuzione lenta e controllata, espirare durante la fase concentrica..."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tecnica e Focus"}),(0,l.jsx)("input",{type:"text",value:r.technique,onChange:e=>n({...r,technique:e.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white",placeholder:"Es: Tecnica rest-pause, super slow negatives..."})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:s,className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl font-semibold transition-all",children:"Annulla"}),(0,l.jsxs)("button",{onClick:()=>{if(!r.name.trim()){alert("Inserisci un nome per l'esercizio");return}t({id:S(),name:r.name,gifUrl:o||void 0,bodyPart:r.bodyPart||void 0,target:r.target||void 0,equipment:r.equipment||void 0,sets:r.sets,reps:r.reps,rest:r.rest,notes:r.notes||void 0,technique:r.technique||void 0})},className:"flex-1 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white px-4 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:[(0,l.jsx)(p,{size:20}),"Crea Esercizio"]})]})]})]})})})};var G=()=>{let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)("login"),[i,n]=I("users",C),[o,c]=I("sheets",[]),[d,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=setTimeout(()=>x(!1),500);return()=>clearTimeout(e)},[]);let m=(0,a.useCallback)(async(e,s)=>{let l=i.find(t=>t.email===e&&t.password===s);return!!l&&(t(l),r("client"===l.role?"client-view":"dashboard"),!0)},[i]),u=(0,a.useCallback)(()=>{t(null),r("login")},[]);return d?(0,l.jsx)(M,{}):e?"client"===e.role?(0,l.jsx)(U,{user:e,sheets:o.filter(t=>t.clientId===e.id),onLogout:u}):(0,l.jsx)(q,{user:e,sheets:o,users:i,onSaveSheets:c,onSaveUsers:n,onLogout:u,view:s,setView:r}):(0,l.jsx)(E,{onLogin:m})}},62:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var l=s(2265);let a=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},d=(0,l.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:d="",children:x,iconNode:m,...u}=e;return(0,l.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:s,strokeWidth:n?24*Number(i)/Number(r):i,className:a("lucide",d),...!x&&!c(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[t,s]=e;return(0,l.createElement)(t,s)}),...Array.isArray(x)?x:[x]])}),x=(e,t)=>{let s=(0,l.forwardRef)((s,i)=>{let{className:o,...c}=s;return(0,l.createElement)(d,{ref:i,iconNode:t,className:a("lucide-".concat(r(n(e))),"lucide-".concat(e),o),...c})});return s.displayName=n(e),s}},9206:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(62).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}},function(e){e.O(0,[971,117,744],function(){return e(e.s=445)}),_N_E=e.O()}]);